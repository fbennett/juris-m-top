pageTitle: Jurism Tech: The Legal Resource Registry
author: Frank Bennett

> This is the first of a series of posts describing the architecture
> behind Jurism's features. These will serve as an *aide-mémoire* for
> myself, as documentation for interested users, and as a reference
> for developers, librarians, and others contributing to the Jurism
> ecosystem. This installment covers the Legal Resource Registry
> (LRR), which is at the core of Jurism's support for law. If you want
> to know how Jurism produces legal citations, this is a good place to
> start.

${toc}

## Jurisdiction identifiers

There is an important difference between the general principles of
citation in any comprehensive style guide, and the rules of citation
for legal materials.  The former describe patterns of citation
to be applied to all materials of a particular type. The patterns
themselves may vary. Consider how a journal article would appear in
a bibliography formatted in three common styles:

* **Chicago (note style)**<br/>&nbsp;&nbsp;&nbsp;&nbsp;Gilmore, Grant. “Law, Logic and Experience.”
  *Howard Law Journal* 3 (1957): 26–41.

* **APA**<br/>&nbsp;&nbsp;&nbsp;&nbsp;Gilmore, G. (1957). Law, Logic and Experience. *Howard
  Law Journal*, 3, 26–41.

* **Bluebook**<br/>&nbsp;&nbsp;&nbsp;&nbsp;Grant Gilmore, Law, Logic and Experience, 3 <span style="font-variant: small-caps;">Howard L.J.</span> 26 (1957).

In contrast, legal citations for a given jurisdiction will be roughly uniform
across all "parent" styles, but there is variation *among
jurisdictions*. For example, consider the following citations to court
judgments, all of which would be correct in any of the three styles above:

* **United States (Supreme
  Court)**<br/>&nbsp;&nbsp;&nbsp;&nbsp;International Shoe
  Co. v. Washington, 326 U.S. 310 (1945).

* **United Kingdom (House of
  Lords)**<br/>&nbsp;&nbsp;&nbsp;&nbsp;Donoghue v. Stevenson, [1932]
  A.C. 562 (HL).

* **Germany (*Bundesgerichtshof*)**<br/>&nbsp;&nbsp;&nbsp;&nbsp;BGH IV ZR 241/18.

To cope with the confluence of format-by-style and
format-by-jurisdiction requirements, the "JM" styles in Jurism render
legal items by first calling a jurisdiction-specific style module to
obtain a set of "building-block" citation elements, and then
assembling them with markup and punctuation appropriate to the parent
style.[^1] In broad outline, the workflow looks like this:

[^1]: Final composition in the parent style gives it control over some
      style-specific features, such as the inclusion or stripping of periods,
      italicization of some titles, back-referencing conventions, and
      a few other details.


``` yaml
type: embedWideImage
src: ./2020-12-20-1/workflow.png
```

This scheme is made possible by a **Jurisdiction** field set on each
legal item. Jurism uses a machine-readable identifier set in this
field (discussed below) to select a *style module* appropriate to the
item.

>> One critical role of the LRR is to supply these essential jurisdiction identifiers,
>> and a human-readable name for each.


## Court abbreviations

In citations to U.S. law, court abbreviations come in two flavors. One
is the form used to indicate the court when citing to a
multi-jurisdictional reporter. The abbreviated name in this case is an
amalgam that to the educated eye expresses both the court and its
jurisdiction:

* Lafond v. Sweeney, 343 P.3d 939 (<span style="color:red;font-weight:bold;">Colo.</span> 2015).
* Begley v. Ireson, 399 P.3d 777 (<span style="color:red;font-weight:bold;">Colo. Ct. App.</span> 2017).
* Pielet v. Pielet, 2012 <span style="color:red;font-weight:bold;">IL</span> 112064.
* McCarthy v. Pointer, 2013 <span style="color:red;font-weight:bold;">IL App (1st)</span> 121688.
* Fallini v. Hodel, 725 F. Supp. 1113 (<span style="color:red;font-weight:bold;">D. Nev.</span> 1989).
* In Re Moore, 290 B.R. 287 (<span style="color:red;font-weight:bold;">Bankr. E.D.N.C.</span> 2003).
* Edwards v. Ayers, 542 F.3d 759 (<span style="color:red;font-weight:bold;">9th Cir.</span> 2008).

The second possible form is that used in a dozen or so
U.S. jurisdictions to indicate the court in a "vendor-neutral"
citation form:

* Lafond v. Sweeney, 2015 <span style="color:red;font-weight:bold;">CO</span> 3.
* Begley v. Ireson, 2017 <span style="color:red;font-weight:bold;">COA</span> 3.
* Pielet v. Pielet, 978 N.E.2d 1000 (<span style="color:red;font-weight:bold;">Ill.</span> 2012).
* McCarthy v. Pointer, 3 N.E.3d 852 (<span style="color:red;font-weight:bold;">Ill. App. Ct.</span> 2014).

To generate these various abbreviations, Jurism sets a
machine-readable code in the **Court** field, which is used together
with the jurisdiction code to look up the correct abbreviation for a
given citation.

>> A second critical role of the LRR is to supply a machine-readable
>> identifier for each court type and, for each
>> jurisdiction having a court of that type, to provide a human-readable
>> name and up to two abbreviations for use in that context.

## Reporters and abbreviations

To keep citations compact and clear, citation styles call for
abbreviations to be partially or completely suppressed in some
contexts, to avoid repetition. If a reporter is entirely dedicated
to decisions of a particular court, the court abbreviation is
omitted entirely in the parenthetical below:

* Gedra v. Dallmer Co., 153 Ohio St. 258 (1950).

If a reporter is dedicated to decisions of a particular *jurisdiction*
by courts at more than one level, the jurisdiction hint can be removed
from the abbreviation, leaving only the court name:

* Kashian v. Harriman, 120 Cal. Rptr. 2d 576 (Ct. App. 2002).

In one unusual case (Ohio), the core portion of a vendor-neutral
citation form conveys only the state-level jurisdiction. In this case
as well, that portion of the full court description is remove to avoid
repetition:

* Lanzer v. Louisville, 2016-Ohio-8071 (11th Dist.).

Finally, it can happen that certain reporters, because of their
form of publication, require a distinctive citation format.
For example, compare the following two formats for citations
to a decision of the German Federal Administrative Court:

**Ordinary citation**

* BVerwG, NVwZ 1999, 296

|||
| ------------------- | ---------------------------------------- |
| BVerwG | Court name (*Bundesverwaltungsgericht*)               |
| NVwZ   | Journal name (*Neue Zeitschrift für Verwaltungsrecht* |
| 1999   | Year of report                                        |
| 296    | Page                                                  |


<br/>

**Specially formatted citation**

* BVerwG, Beschl. v. 9.1.1999 – Buchholz 310 § 65 VwGO Nr. 131, S. 2.

|||
| ----------- | ------------------------------------------------------------------------------------------------------ |
| BVerwG      | Court name (*Bundesverwaltungsgericht*)                                                                |
| Beschl.     | Disposition type (*Beschluss* = judgment)                                                              |
| v. 9.1.1999 | Date of disposition                                                                                    |
| Bucholz     | Reporter name (Buchholz, *und Nachschlagewerk der Rechtsprechung des Bundesverwaltungsgerichts* = Bucholz, "A Reference Work on the Case Law of the Federal Administrative Court") |
| section 310 | Section within the reporter |
| § 65 VwGO       | Paragraph and statute applied (*Verwaltungsgerichtsordnung* = Administrative Code) |
| decision no. 131 | Number of decision within *Bucholz* (not unique) |
| S. 2 | Page |

<br/>

>> The role of the LRR in addressing the requirements described in this section
>> is to provide hints for the full or partial suppression of certain portions
>> court abbreviations, and of selecting alternative formatting, depending on the
>> core element of a citation (whether that be a reporter name or a vendor-neutral
>> abbreviation).

## Identifier formats

The structure of Jurism jurisdiction and court identifiers loosely
follows one portion of the draft URN:LEX specification submitted to
the IETF by Spinosa, Francesconi, and Lupo.[^2] An instance of a court
or other body is identified by two elements: a "jurisdiction;" and a
"court." When the two are combined for processing, they are joined with
a semicolon:

* `<jurisdiction>`  **;**  `<court>`

The jurisdiction identifier (more accurately "domain identifier")
consists of one or more elements, each composed of lowercase roman
letters and periods, joined by a colon delimiter (no other characters
are permitted). An identifier with two or more elements expresses a
nested set of domains, with the leftmost being the largest and the
rightmost the smallest. The relationship between parent and child
domains is otherwise indeterminate. It may be one of procedural
hierarchy …

| ||
| ---: | ----------------- |
| `us` | United States \| US |
| `us:c9` | US \| Ninth Federal Appellate Circuit |
| `us:c9:ca.cd` | US \| Ninth Federal Appellate Circuit \| Central District of California |

… or a child domain may simply be a container of convenience to group
together courts and other entities that are under the parent's
jurisdiction …

| ||
| ---: | ----------------- |
| `us` | United States \| US |
| `us:fed` | US \| Various federal courts and tribunals |

Court identifiers represent a court of a particular *type*, such as
"District Court" or a "Court of Appeals," of which there may be
multiple instances. The identifier is composed of roman characters and
periods. There are no particular rules for composition of the court
identifier, other than that it must be unique to a given body within a
given jurisdiction (note that the names below are descriptive only—the
mapping of identifiers to court abbreviations is covered in the
following sections):

| ||
| ---: | ----------------- |
| `sc` | Supreme Court |
| `district.court` | District Court |

Where a court has divisions that are included in citations, the
court identifier can be extended by an additional element separated
by a tilde (`~`):


| ||
| ---: | ----------------- |
| `ecj~chamber.1` | European Court of Justice, First Chamber |
| `cass~civ.1` | Cour de cassassion 1<sup>re</sup> chambre civil |

>> The primary purpose of the LRR is to support the organization and
>> citation of materials. A jurisdiction identifier is not intended as
>> a firm statement about procedure or institutional structure.
>> Extended identifiers for court divisions are included only if
>> relevant to citation requirements.

[^2]: Pier Luigi Spinosa, Enrico Francesconi, and Catarina Lupo, “[A
      Uniform Resource Name (URN) Namespace for Source of Law
      (LEX)](https://datatracker.ietf.org/doc/draft-spinosa-urn-lex/)”
      (IETF, expired work in progress, inactive, December 8, 2018).


## Jurism output files and formats

The primary purpose of the Legal Resource Registry is to support the
storage and citation of legal materials in the Jurism reference
manager: it is part of that program's source code. National
jurisdictions and international organizations covered by the system
are each represented by a single source file containing its
identifiers and abbreviations, in a format that lends itself to manual
editing. The LRR source files are then "compiled" to produce two
intermediate source files, which are used in the actual Jurism build:
auto-abbreviation files; and user interface maps. The format of these
two targets is documented in this section.

### Abbreviations

The LRR compiler sets abbreviations for use in generating citations in
files named according to the following template:

* **auto-**`<domain>[`**-**`<variant>`**`]`.json**

* The *domain* is a two-character ISO country code (i.e. `us`, `jp`,
  etc.), or an ad hoc identifier for an international body
  (i.e. `eu.int`, `un.int`, `coe.int`).
* The optional *variant* element is an arbitrary name, which can
  be used to call the variant from a CSL style.
* Each supported jurisdiction *must* have a bare abbreviation file
  with no variant name. Multiple variants of a given jurisdiction
  are permitted.

The file content itself is in JSON format. The following sample
illustrates the features of the syntax. There is quite a lot
to digest here, so we will take it by line numbers.

```json
{
  "filename": "auto-zz.json",
  "name": "Atlantis",
  "version": "2019-08-19 12:16:29 UTC",
  "xdata": {
    "default": {
      "place": {
        "ZZ": "Laputa",
        "ZZ:ATL": "Atlantis"
      }
    },
    "zz": {
      "institution-part": {
        "sc": "Sup. Ct."
      },
      "institution-entire": {
        "sc": "SC"
      },
      "container-title": {
        "Laputa Reports": "!authority>>>Lap. Rep."
      }
    },
    "zz:atl": {
      "institution-part": {
        "ca": "Atl. Ct. App."
      },
      "institution-entire": {
        "ca": "CA"
      },
      "container-title": {
        "Atlantis Decisions": "!authority:Atl.>>>Atl. Dec."
        "Poseidon Service": "#1>>>Poseidon Serv."
      }
    }
  }
}
```
* **Lines 2-4:** The header declares the *filename*, the *name* of the
  jurisdiction, and the *version*, expressed as an ISO timestamp.[^3]
* **Lines 5-35:** The Jurism abbreviation data is contained in the *xdata*
  object.
* **Lines 6, 12, & 23:** These are the jurisdiction codes provided by this
  source file. Each legal item in Jurism carries a `jurisdiction`
  value, which is used to select the abbreviations to be applied.
  If a match is not found, the abbreviations of the parent jurisdiction
  are tried. When all matches fail, the *default* "jurisdiction" is tried.
* **Lines 7-10:** The names of jurisdictions themselves (possibly abbreviated)
  are set against the upper-cased jurisdiction code.

  The *place* segment is one of ten abbreviation categories used by
  the Jurism citation processor.  The full list is:

  |  | | |
  | ------------------ | ----------- | ----------- |
  | container-title    | nickname    | place       |      
  | collection-title   | number      | hereinafter |
  | institution-entire | title       | classic     |
  | institution-part   |             |             |

* **Lines 13-15 & 24-26:** The *institution-part* abbreviations
  are used by styles where a descriptive abbreviation of the
  court in this jurisdiction context is required. Only the courts
  that exist at a given jurisdiction level are listed within its
  scope.

* **Lines 16-18 & 27-29:** The *institution-entire* abbreviations
  are used by styles where a code for the court is required, as
  in a vendor-neutral style.

* **Lines 19-21:** Abbreviations in the *container-title* category are
  applied to journal names. In an ordinary entry, the mapping is
  simply from the variable content (as key) to the abbreviation (as
  value). The entry at line 20 prepends a formatting statement to
  suppress the `authority` variable, which holds the court name or
  code in data received by the citation processor.  Although it will
  rarely be required, if ever, multiple variables can be suppressed by
  setting them as a comma-delimited list. The syntax of the
  suppression statement is as follows:

  - **!**`<variable>[`**,**`<variable>]`**>>>**


  As to the effect of this formatting statement, the `authority`
  variable is a member of the `institution-part` and
  `institution-entire` categories, so this statement will suppress the
  court name (or its abbreviation) in any citation to the Laputa Reports
  journal. This is appropriate if Laputa Reports carries only Supreme
  Court judgments, so …

  - Jones v. Smith, 12 All Lap. 34 (Sup. Ct. 1999).

  … but …

  - Noakes v. Stoakes, 56 Lap. Rep. 78 (2000).
  
* **Line 31:** This entry illustrates partial suppression of
  a court name. The syntax is the same that for full suppression,
  but with a string for removal set off from the variable name
  with a colon:

  - **!**`<variable>[`**:**`<string>][`**,**`<variable>[`**:**`<string>]]`**>>>**

  The effect of this statement will be to remove "Atl." from the `authority`
  variable when it is rendered in the cite. This is appropriate if Atlantis
  Decisions covers multiple courts within the Atlantis jurisdiction: the
  jurisdiction hint in the abbreviated court name will be removed, and only
  the court name itself, if any, will remain. So …

  - Anderson v. Biggles, 12 All Lap. 34 (Atl. Ct. App. 1999).

  … but …

  - Comstock v. Drub, 56 Atl. Dec. 78 (Ct. App. 2000).

* **Line 32:** A hash mark followed by a number as a formatting
  statement sets the number as the value of a `cite-form` variable
  in the citation processor. The variable can be tested in the
  processor to apply custom formatting this cites to this
  particular journal.

>> In the Jurism client, the abbreviation source files are used to
>> populate a database in the Abbrevs Filter plugin with abbreviations
>> appropriate to a particular style.  The database format, the
>> Abbrevs Filter, and its interface to the citation processor are
>> beyond the scope of this overview.


[^3]: For performance reasons, the LRR compiler also sets the timestamp
      in a separate `DIRECTORY_LISTING.json` file in the abbreviations
      source directory.

### User Interface Maps

Jurisdiction and court codes are not exposed directly in the Jurism
user interface: a human-readable equivalent is displayed instead.  In
the Jurism source code, the data to produce maps for converting
between the two are stored in files named for the domain to which
each applies:

* **juris-**`<domain>`**-map.json**

A sample of such a file, illustrating a jurisdiction with multiple
languages, is shown below. The file format is quite compact to
minimize the bulk of data shipped with the Jurism client. There is
again a lot to unpack, and we will take it by line numbers:

```json
{
  "courts": [
    [
      "sc",
      "Supreme Court"
    ],
    [
      "sc",
      "Cour suprême"
    ],
    [
      "ca",
      "Court of Appeal"
    ],
    [
      "ca",
      "Cour d'appel"
    ]
  ],
  "jurisdictions": {
    "default": [
      [
        "zz",
        "Laputa",
        null,
        0
      ],
      [
        "atl",
        "Atlantis",
        0,
        2
      ]
    ],
    "fr": [
      [
        "zz",
        "Laputa",
        null,
        1
      ],
      [
        "atl",
        "Atlantis",
        0,
        3
      ]
    ]
  }
}
```

* **Lines 2 & 20:** There are two main segments in a maps file:
  `courts`; and `jurisdictions`.

* **Lines 2-19:** The value of the `courts` key is an array of
  two-element arrays, where the first element is a court code, and the
  second a human-readable name for the court. As this file provides
  data for two languages, there are two entries in the parent array
  for each court. These entries are address in the `jurisdictions`
  section by their array position.

* **Lines 21 & 35:** The value of the `jurisdictions` key is an object
  with at least one `default` key, and optionally keys for additional
  languages. This file provides one language (`fr`, the two-character
  ISO code for French) as an alternative to the default.

* **Lines 22-27 & 36-41:** Each child object under the `jurisdictions`
  key is an array entry of at least three elements, each representing
  one jurisdiction level. Within each entry: the first element is the
  key (composed of roman characters and periods) for that level; the
  second the human-readable name of the level; and the third either
  `null` or an integer. The root (or top-level) entry has a value of
  `null` in third position, and is always placed at the beginning of
  the enclosing array. The fourth and following values of each entry
  are integers set to the zero-origin index position of a court in the
  `courts` array. Note that in these two top-level entries, the
  fourth-position indices are for the English and the French versions
  of the court information.

* **Lines 28-33 & 42-47:** The jurisdiction-level entries after the
  first have an integer value in the third position, set to the
  zero-origin index position of their immediate parent. In these
  examples, the immediate parent of the `atl` jurisdiction level
  is `zz`, at index position `0` in both cases.
  
>> Jurism user interface maps are source code for building a database
>> to drive pulldown menus in the **Jurisdiction** and **Court**
>> fields. The map files described here are automatically generated by
>> the LRR compiler, and should not be edited directly.


## Syntax of LRR source files




## LRR compilation

[^103]: *See, e.g.*, <span style="font-variant:small-caps;">Yale Law
        Review</span>, <span style="font-variant:small-caps;">The
        Writing of a Case Note</span> (Karl N Llewellyn ed., 1920);
        *and* <span style="font-variant:small-caps;">Harvard Law
        Review</span>, <span style="font-variant:small-caps;">A
        Uniform System of Citation: Abbreviations and Form of
        Citation</span> (Erwin Griswold ed., 1926); *see also* Robert
        M. Jarvis, *John B. West: Founder of the West Publishing
        Company*, 50 <span
        style="font-variant:small-caps;">Am. J. L. History</span> 1
        (Jan. 2008); Fred R. Shapiro, *Origins of Bibliometrics,
        Citation Indexing, and Citation Analysis: The Neglected Legal
        Literature*, 43 <span
        style="font-variant:small-caps;">J. Am. Soc. Info. Sci.</span>
        337 (1992).

[^104]: Examples are the machine-readable court and jurisdiction
        identifiers described here, as well as the "graphs" expressing
        the structure of judicial systems and the relationships among
        court judgments)

[^105]: For an open-source example of the work required to properly
        scrape citations from legal text, see <span
        style="font-variant:small-caps;">reporters-db: a database of
        court reporters, tests and other experiments </span>, (Free
        Law Project, GitHub Repo. Nov. 17, 2014 as at Dec. 21, 2020),
        <a
        href="https://github.com/freelawproject/reporters-db">https://github.com/freelawproject/reporters-db</a>.

[^106]: This is a problem for third-party reference management tools
        like Jurism, which require machine-readable data to help users
        navigate the forest of the law, by automatically organizing
        the trees of which it is composed:

        <img src="./2020-12-20-1/Exampleofdigitalhoarding_cluttereddesktop001.jpeg" width="50%"/>

